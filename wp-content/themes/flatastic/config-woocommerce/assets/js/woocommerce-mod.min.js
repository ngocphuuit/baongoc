!function(a){a.mad_woocommerce_mod=a.mad_woocommerce_mod||{},a.mad_woocommerce_mod.product_preview=function(){var b=a(".product_preview[data-output]");b.length&&b.each(function(b,c){var d=a(c),e=a(d.data("output"));d.find("[data-image]:first").addClass("active"),d.on("click","[data-image]",function(){var b=a(this);if(!b.hasClass("active")){b.parents(".qv-carousel").find("a").removeClass("active"),b.addClass("active");var c=a(this).attr("data-image");e.length&&e.children("img").stop().animate({opacity:0},250,function(){a(this).attr("src",c).stop().animate({opacity:1})})}})})},a.mad_woocommerce_mod.tabbed=function(){if(a('[class*="tabs-holder"]').length){var b=a('[class*="tabs-holder"]');b.each(function(b,c){var d=a('[class*="tabs-nav"]',c),e=Modernizr.touch?"touchstart":"click";d.on(e,"a",function(b){b.preventDefault();var c=a(this).parent("li"),d=c.index();c.hasClass("active")&&b.preventDefault(),c.siblings().removeClass("active").end().addClass("active").parent().next().children('[class*="tab-content"]').stop(!0,!0).hide().eq(d).stop(!0,!0).fadeIn(800)})})}},a.mad_woocommerce_mod.toggleCategories=function(){var b=a(".product-categories");b.length&&(b.find("li").each(function(b,c){a(c).children("ul.children").length&&a(c).children("a").append('<span class="toggle-switch"></span>')}),b.on("click",".toggle-switch",function(b){b.preventDefault();var c=a(b.target),d=c.parent("a").parent("li");d.children("ul.children").length&&d.toggleClass("active").children("ul.children").slideToggle()}))},a.mad_woocommerce_mod.setCustomScrollBar=function(){var b=a(".custom-scrollbar");if(b.length)var c=setInterval(function(){b.is(":visible")&&(b.customScrollbar({preventDefaultScroll:!0,updateOnWindowResize:!0}),clearInterval(c))},25)},a.mad_woocommerce_mod.raty=function(){a(".rating").length&&(a(".rating.readonly-rating").raty({readOnly:!0,path:global.paththeme+"/images/img",score:function(){return a(this).attr("data-score")}}),a(".rating.rate").raty({path:global.paththeme+"/images/img",score:function(){return a(this).attr("data-score")}}))},a.mad_woocommerce_mod.get_gallery_list=function(){var b=[],c="qv-carousel";return a("#"+c+" a").each(function(){var c="";a(this).attr("data-zoom-image")?c=a(this).attr("data-zoom-image"):a(this).attr("data-image")&&(c=a(this).attr("data-image")),c&&b.push({href:""+c,title:a(this).find("img").attr("title")})}),b},a.mad_woocommerce_mod.zoom=function(){if(a("body.single-product").length){if(a.mad_woocommerce_mod.getGalleryList=function(){var b=[],c="qv-carousel";return a("."+c+" a").each(function(){var c="";a(this).data("zoom-image")?c=a(this).data("zoom-image"):a(this).data("image")&&(c=a(this).data("image")),c&&b.push({href:""+c,title:a(this).find("img").attr("title")})}),b},a(".image_preview_container").length){var b=a(".image_preview_container");b.each(function(){var b=a(this),c=b.data("id");a("#img_zoom",b).length&&a("#img_zoom",b).elevateZoom({gallery:"thumbnails_"+c,galleryActiveClass:"active",zoomWindowFadeIn:500,zoomWindowFadeOut:500})})}a(".qv-review-expand").length&&a(".qv-review-expand").on("click",function(b){b.preventDefault();var c,d=[];if(a("#img_zoom").length){var e=a(this),f=e.prev("img").data("elevateZoom");c=f.getGalleryList()}else c=a.mad_woocommerce_mod.getGalleryList();if(a.each(c,function(a,b){var c={};c.src=b.href,c.type="image",d.push(c)}),0==d.length){var g={};g.src=a(this).attr("href"),g.type="image",d.push(g)}a.magnificPopup.open({items:d,type:"image",mainClass:"mfp-fade-in",removalDelay:300,closeBtnInside:!0,closeOnContentClick:!0,midClick:!0,fixedContentPos:!1,gallery:{tCounter:"%curr% / %total%",enabled:!0,preload:[1,1]},callbacks:{open:function(){var b=this;a.magnificPopup.instance.next=function(){b.wrap.removeClass("mfp-image-loaded"),setTimeout(function(){a.magnificPopup.proto.next.call(b)},80)},a.magnificPopup.instance.prev=function(){b.wrap.removeClass("mfp-image-loaded"),setTimeout(function(){a.magnificPopup.proto.prev.call(b)},80)}},imageLoadComplete:function(){var a=this;setTimeout(function(){a.wrap.addClass("mfp-image-loaded")},15)}}})})}},a.mad_woocommerce_mod.productIsotope=function(){function b(b,c){var d=c,e=[],f=d.length;if(d.removeClass("random"),".random"===b){for(var g=0;g<f;g++)e.push(+(Math.random()*f).toFixed());a.each(e,function(a,b){c.eq(Math.floor(Math.random()*b-1)).addClass("random")})}}var c=a(".products-isotope");c.length&&c.each(function(){var d=a(this),e=a("ul.products",d),f={itemSelector:".product",layoutMode:"fitRows",duration:750,easing:"linear",queue:!1};a("body").hasClass("rtl")&&(f.isOriginLeft=!1),e.imagesLoaded(function(){e.isotope(f)}),a(".product-filter",c).on("click","button",function(){var c=a(this),d=c.attr("data-filter");"random"==d&&b.call(c,"."+d,e.find(".product")),c.closest("li").addClass("active").siblings().removeClass("active"),"*"==d?e.isotope({filter:d}):e.isotope({filter:"."+d})})})},a.mad_woocommerce_mod.specialsCarousel=function(){var b=a(".specials-carousel");b.length&&b.owlCarousel({singleItem:!0,theme:"owl-widget-theme",autoPlay:!1,slideSpeed:1e3,autoHeight:!0,stopOnHover:!0,navigation:!0,rewindNav:!0,scrollPerPage:!1,pagination:!1,paginationNumbers:!1})},a.mad_woocommerce_mod.productCarousel=function(){var b=a(".product-carousel"),c=a("ul.products",b),d=b.data("columns")||3,e="no_sidebar"==b.data("sidebar")?4:3,f="no_sidebar"==b.data("sidebar")?3:2,g=[[1199,d],[992,e],[768,3],[558,2],[480,f],[470,2],[300,1]];b.length&&c.owlCarousel({theme:"owl-tm-theme",itemsCustom:g,autoPlay:!1,slideSpeed:1e3,autoHeight:!0,stopOnHover:!0,navigation:!0,rewindNav:!0,scrollPerPage:!1,pagination:!1,paginationNumbers:!1,afterInit:function(c){var d=this,e=d.$userItems,f=a(".product-filter",b);f.on("click","li",function(){var d=a(this),f=d.children().data("filter");c.addClass("changed").find(".owl-wrapper").animate({opacity:0},function(){c.children().remove(),c.data("owlCarousel").destroy(),"*"==f?a.each(e,function(b,d){c.append(a(d))}):a.each(e,function(b,d){var e=a(d);e.hasClass(f)&&(e.find(".animate_vertical_finished").removeClass("animate_vertical_finished"),c.append(e))}),c.owlCarousel({items:b.data("columns")||4,theme:"owl-tm-theme",autoPlay:!1,slideSpeed:1e3,autoHeight:!0,stopOnHover:!0,navigation:!0,rewindNav:!0,scrollPerPage:!1,pagination:!1,paginationNumbers:!1,afterInit:function(a){a.addClass("no_children_animate")}}),a(window).trigger("resize")}),d.closest("li").addClass("active").siblings().removeClass("active")})}})},a.mad_woocommerce_mod.relatedCarousel=function(){var b=a(".related.products"),c=a("ul.products",b),d=b.parent(".products-container").data("columns")||3,e="no_sidebar"==b.data("sidebar")?4:3,f=[[1199,d],[992,e],[768,2],[480,2],[300,1]];b.length&&c.owlCarousel({itemsCustom:f,theme:"owl-tm-theme",autoPlay:!1,slideSpeed:1e3,autoHeight:!0,stopOnHover:!0,navigation:!0,rewindNav:!0,scrollPerPage:!1,pagination:!1,paginationNumbers:!1})},a.mad_woocommerce_mod.qvCarousel=function(){var b=a(".qv-carousel");b.length&&b.each(function(){a(this).owlCarousel({theme:"owl-qv-carousel-theme",itemsCustom:[[1199,3],[992,3],[768,3],[480,3],[300,2]],autoPlay:!1,slideSpeed:1e3,autoHeight:!0,stopOnHover:!0,navigation:!0,rewindNav:!0,scrollPerPage:!1,pagination:!1,paginationNumbers:!1,afterInit:function(){a.mad_woocommerce_mod.product_preview.call(this)}})})},a.changeView=function(b){this.options=a.extend({},a.changeView.DEFAULTS,b),this.init()},a.changeView.DEFAULTS={},a.changeView.prototype={init:function(){var b=this;b.body=a("body"),b.support={touch:Modernizr.touch},b.view=a(".list-or-grid"),b.view.eventtype=b.support.touch?"touchstart":"click",b.event()},event:function(){this.view.on(this.view.eventtype,"a",a.proxy(function(a){this.load(a)},this))},load:function(b){b.preventDefault();var c=a(b.target),d=c.data("view"),e=c.closest(".products-container");c.siblings().removeClass("active").end().addClass("active"),e.removeClass("view-grid-center view-list").addClass(d),a.cookie("mad_shop_view",d)}},a.mad_woocommerce_mod.cartDropdown=function(){({init:function(){var a=this;a.support={touch:Modernizr.touch,transitions:Modernizr.csstransitions},a.eventtype=a.support.touch?"touchstart":"click";var b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};a.transEndEventName=b[Modernizr.prefixed("transition")],a.clicked_product={},a.add_buttons(),a.listeners()},add_buttons:function(){a("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" id="add1" class="plus" />').prepend('<input type="button" value="-" id="minus1" class="minus" />')},update_cart_dropdown:function(b){var c=this,d=a(".cart-dropdown"),e=d.data("text"),f=c.clicked_product;if("undefined"!=typeof b){var g=a("<li class='cart-notification'><div class='added-product-text'><strong>"+f.name+"</strong> "+e+"</div> "+f.image+"</li>");g.on("mouseenter template_hide",function(){var b=a(this);setTimeout(function(){b.removeClass("visible-cart")},100);var d=function(){b.remove()};c.support.transitions?b.on(c.transEndEventName,d):d()}).prependTo(d),setTimeout(function(){g.addClass("visible-cart")},50),setTimeout(function(){g.trigger("template_hide")},2500)}},listeners:function(){var b=this;b.track_ajax_refresh_cart(b),b.track_ajax_add_to_cart(),a("body").on("added_to_cart",a.proxy(function(c,d){a(".add_to_cart_button").unblock(),a(".shopping-button .count").html(d.count),a(".shopping-button .amount").html(d.subtotal),b.update_cart_dropdown(c)},b)).on(b.eventtype,".cart_list .remove-item",function(){a(this).closest("li").animate({opacity:0},function(){a(this).slideUp(400)})}),a(document).on("click",".plus, .minus",function(){var b=a(this).closest(".quantity").find(".qty"),c=parseFloat(b.val()),d=parseFloat(b.attr("max")),e=parseFloat(b.attr("min")),f=b.attr("step");c&&""!==c&&"NaN"!==c||(c=0),""!==d&&"NaN"!==d||(d=""),""!==e&&"NaN"!==e||(e=0),"any"!==f&&""!==f&&void 0!==f&&"NaN"!==parseFloat(f)||(f=1),a(this).is(".plus")?d&&(d==c||c>d)?b.val(d):b.val(c+parseFloat(f)):e&&(e==c||c<e)?b.val(e):c>0&&b.val(c-parseFloat(f)),b.trigger("change")})},track_ajax_refresh_cart:function(b){a.ajax({type:"POST",dataType:"json",url:global.ajaxurl,data:{action:"refresh_cart_fragment"},success:function(c){b.update_cart_fragment(c.fragments),a("body").trigger("wc_fragments_loaded")}}),a("body").on("wc_fragments_refreshed wc_fragments_loaded",function(a){})},update_cart_fragment:function(b){b&&a.each(b,function(b,c){a(b).replaceWith(c)})},track_ajax_add_to_cart:function(){var b=this;a("body").on(b.eventtype,".add_to_cart_button",function(){var c=a(this),d={},e=c.parents(".product").eq(0);d.name=e.find("h3 a").text(),d.image=e.find(".thumbnail-container img"),d.price=e.find(".price .amount").last().text(),c.block({message:null,overlayCSS:{background:"#fff url("+global.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",opacity:.6}}),d.image.length&&(d.image="<img class='added-product-image' src='"+d.image.get(0).src+"' />"),b.clicked_product=d})}}).init()},a.fn.css3Dropdown=function(){return a(this).on("click",function(b){var c=a(this).next();a(this).toggleClass("active"),b.preventDefault(),c.children("ul").children("li").length&&(c.hasClass("opened")?(c.removeClass("opened").addClass("closed"),setTimeout(function(){c.removeClass("closed")},500)):c.addClass("opened"))})},a.mad_woocommerce_mod.check_cart_variation=function(){return"undefined"!=typeof wc_add_to_cart_variation_params&&(a(".variations_form").wc_variation_form(),void a(".variations_form .variations select").change())},a.mad_woocommerce_mod.quickView=function(){({init:function(){a(".quick-view").length&&new a.mad_popup_prepare(".quick-view",{actionpopup:woocommerce_mod.action_quick_view,noncepopup:woocommerce_mod.nonce_quick_view_popup,on_load:function(){this.container.imagesLoaded(function(){a("div.quantity:not(.buttons_added)",this.modal).addClass("buttons_added").append('<input type="button" value="+" id="add1" class="plus" />').prepend('<input type="button" value="-" id="minus1" class="minus" />'),a(".woo-custom-select").length&&a(".woo-custom-select").heapbox(),a.mad_woocommerce_mod.check_cart_variation(),a.mad_woocommerce_mod.qvCarousel(),a.mad_woocommerce_mod.raty(),a.mad_woocommerce_mod.setCustomScrollBar()})}})}}).init()},a.mad_woocommerce_mod.formLogin=function(){({init:function(){a(".to-login").length&&new a.mad_popup_prepare(".to-login",{actionpopup:woocommerce_mod.action_login,noncepopup:woocommerce_mod.nonce_login_popup,on_load:function(){var b=this,c=a(this.el).data().href;a("form.login").ajaxForm({url:c,success:function(){b.closeModal(),window.location.href=c}})}})}}).init()},a(function(){a.mad_woocommerce_mod.quickView(),a.mad_woocommerce_mod.formLogin(),a.mad_woocommerce_mod.qvCarousel(),a.mad_woocommerce_mod.zoom(),a.mad_woocommerce_mod.relatedCarousel(),a.mad_woocommerce_mod.specialsCarousel(),a.mad_woocommerce_mod.productCarousel(),a.mad_woocommerce_mod.productIsotope(),a.mad_woocommerce_mod.toggleCategories(),a.mad_woocommerce_mod.cartDropdown(),a.mad_woocommerce_mod.raty(),a.mad_woocommerce_mod.tabbed(),a(".list-or-grid").length&&new a.changeView,a(".woo-custom-select").length&&a(".woo-custom-select").heapbox(),a(".to-rating").length&&a(".to-rating").on("click",function(b){b.preventDefault();var c=a(this),d=c.attr("href"),e=a(".woocommerce-tabs");"#reviews"==d&&(a("ul.tabs li.reviews_tab a",e).click(),a("html, body").stop(!0,!0).animate({scrollTop:e.offset().top+"px"},{duration:1e3,easing:"easeOutQuint"}))});var b=window.location.hash;"#register"==b&&setTimeout(function(){var b=a('[data-type-form="register"]');b.length&&b.trigger("click")},100)})}(jQuery);